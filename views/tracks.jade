extends layout

block content

  .well.content-well
    h1 #{count} #{(count == 1) ? "Track" : "Tracks"} Known
    p Ordered by number of plays.  Display limited to #{limit} tracks.  Pass <code>limit</code> to change this.
    
    if (!query)
      .row
        .span6
          h3 Top Tracks (All Time)
          ol
            for track in topTracksAll
              li
                a(href="/#{track._artist.slug}/#{track.slug}/#{track._id}") #{track.title}
                |  by 
                a(href="/#{track._artist.slug}") <strong>#{track._artist.name}</strong>
                |  was played <strong>#{track.count}</strong> times.
        .span6
          h3 Top Tracks (past 30 days)
          ol
            for track in topTracks30
              li
                a(href="/#{track._artist.slug}/#{track.slug}/#{track._id}") #{track.title}
                |  by 
                a(href="/#{track._artist.slug}") <strong>#{track._artist.name}</strong>
                |  was played <strong>#{track.count}</strong> times.
        .span6
          h3 Top Tracks (past 7 days)
          ol
            for track in topTracks7
              li
                a(href="/#{track._artist.slug}/#{track.slug}/#{track._id}") #{track.title}
                |  by 
                a(href="/#{track._artist.slug}") <strong>#{track._artist.name}</strong>
                |  was played <strong>#{track.count}</strong> times.


    else
      ol
        for track in tracks
          li
            if (track._artist)
              a(href="/#{track._artist.slug}") #{track._artist.name}
              |  &mdash; 
              a(href="/#{track._artist.slug}/#{track.slug}/#{track._id}") #{track.title}
            else
              h5 ಠ_ಠ #{track}
